{"is_source_file": true, "format": "TypeScript (TSX / React JSX)", "description": "This file implements the main React component for a Tetris game frontend, including game state management, rendering, controls, scoring, and user interface overlays (game over, pause). It integrates game logic from external modules and manages user interactions, game timing, and dynamic sizing.", "external_files": ["../tetris/types", "../tetris/engine"], "external_methods": ["createEmptyBoard", "getTetromino", "createBagRNG", "rotate", "isValidPosition", "mergeBoard", "clearRows", "randomSeededRNG"], "published": ["TetrisGame"], "classes": [], "methods": [{"name": "getDropY", "description": "Calculates the y-coordinate where a tetromino would land if dropped straight down from its current position."}, {"name": "getLevelByLines", "description": "Determines the current game level based on total lines cleared."}, {"name": "getScoreForClearedRows", "description": "Calculates score based on cleared rows and current level using classic NES scoring rules."}, {"name": "initGame", "description": "Initializes or restarts the game state, setting up the board, pieces, score, and level."}, {"name": "spawnPiece", "description": "Spawns a new tetromino piece at the top of the board, updating next piece info."}, {"name": "fall", "description": "Handles the automatic downward movement of the current piece, locking it when it cannot move further, updating the board, clearing rows, and checking game over conditions."}], "calls": ["setTimeout", "clearTimeout", "Math.min", "Math.floor", "Math.max", "rotate", "isValidPosition", "mergeBoard", "clearRows", "getTetromino", "createEmptyBoard", "createBagRNG", "randomSeededRNG"], "search-terms": ["TetrisGame", "React.FC", "game state", "fall timer", "controls", "score", "next piece", "game over overlay", "pause overlay", "drop calculation", "grid rendering"], "state": 2, "file_id": 18, "knowledge_revision": 59, "git_revision": "5ea43db3976d82cd398229024063a07bdcf02163", "revision_history": [{"37": ""}, {"44": ""}, {"45": ""}, {"46": ""}, {"47": "fc7d43140033530554bbb1c5e2f1342d99cc91a5"}, {"52": "fc7d43140033530554bbb1c5e2f1342d99cc91a5"}, {"53": "5ea43db3976d82cd398229024063a07bdcf02163"}, {"56": "5ea43db3976d82cd398229024063a07bdcf02163"}, {"57": "5ea43db3976d82cd398229024063a07bdcf02163"}, {"58": "5ea43db3976d82cd398229024063a07bdcf02163"}, {"59": "5ea43db3976d82cd398229024063a07bdcf02163"}], "ctags": [], "hash": "6989451dd03a920c7e0335e8a110b840", "format-version": 4, "code-base-name": "tetris_frontend", "filename": "tetris_frontend/src/components/TetrisGame.tsx"}